(this["webpackJsonpIS-royal-game-of-ur"]=this["webpackJsonpIS-royal-game-of-ur"]||[]).push([[0],{13:function(e,t,r){},21:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),i=r(3),s=r.n(i),a=(r(13),r(2)),o="ADD_FIGURE",l="ROLL",u="SAVE",b="SWITCH_PLAYER",p="RESET_ROLL",j="CHANGE_STATE",d="AVAILABLE_MOVES",f="MOVE_FIGURE",y="REMOVE_FIGURE",O="INFO",h="RESET",g="LIGHT_ON",v="LIGHT_OFF",x=function(e,t){return{type:o,player:e,spot:t}},m=function(e){return{type:l,value:e}},E=function(){return{type:p}},R=function(e,t){return{type:j,player:e,state:t}},M=function(e,t){return{type:y,player:e,field:t}},S=function(e,t){return{type:O,player:e,info:t}},A=function(e,t,r){return{type:g,player:e,target:t,probability:r}},G="AGGRESSIVE_ROBOT_PLAYER",I=function(e,t){var r=U(),n=w(e,t,r);return{move:n[Math.floor(Math.random()*n.length)],roll:r,possibleMoves:n}},L="AWAITS_ROLL",T="SELECTS_FIGURE",F=!1,_=!0,N={blue:{saved:0,inGame:0,spare:7,info:"",state:L,robot:{isRobot:F,type:"REAL_PLAYER"},moves:[],figures:[]},green:{saved:0,inGame:0,spare:7,info:"",robot:{isRobot:_,type:G},state:L,moves:[],figures:[]}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0,r={};if(t.type===o)return r[t.player]=e[t.player],r[t.player].figures.push(t.spot),r[t.player].spare=e[t.player].spare-1,r[t.player].inGame=e[t.player].inGame+1,Object.assign({},e,r);if(t.type===u)return r[t.player]=e[t.player],r[t.player].saved=e[t.player].saved+1,r[t.player].spare=e[t.player].spare-1,Object.assign({},e,r);if(t.type===j)return r[t.player]=e[t.player],r[t.player].state=t.state,Object.assign({},e,r);if(t.type===d)return r[t.player]=e[t.player],r[t.player].moves=t.moves,Object.assign({},e,r);if(t.type===f){r[t.player]=e[t.player];var n=[];return e[t.player].figures.forEach((function(e){e!==t.from&&n.push(e)})),n.push(t.to),r[t.player].figures=n,Object.assign({},e,r)}if(t.type===y){r[t.player]=e[t.player];var c=[];return e[t.player].figures.forEach((function(e){e!==t.field&&c.push(e)})),r[t.player].figures=c,r[t.player].inGame=e[t.player].inGame-1,r[t.player].spare=e[t.player].spare+1,Object.assign({},e,r)}return t.type===O?(r[t.player]=e[t.player],r[t.player].info=t.info,Object.assign({},e,r)):t.type===h?{blue:{saved:0,inGame:0,spare:7,info:"",state:L,robot:{isRobot:F,type:"REAL_PLAYER"},moves:[],figures:[]},green:{saved:0,inGame:0,spare:7,info:"",state:L,robot:{isRobot:_,type:"REAL_PLAYER"},moves:[],figures:[]}}:e},B=r(0),U=function(){return Math.floor(2*Math.random())+Math.floor(2*Math.random())+Math.floor(2*Math.random())+Math.floor(2*Math.random())},D=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:U(),c=n;e(m(c)),0===c?(e(S(r,"Rolled 0|Losing Turn")),Z(e,r)):0===t[r].figures.length?(e(x(r,Q(c,r))),4===c?(e(R(r,L)),e(S(r,"Special Field|Extra Turn")),e(E())):Z(e,r)):V(e,c,t,r)},Y=function(e,t){var r=0,n={0:.5,1:.5,2:.25,3:1/3*.5,4:.125};return[1,2,3,4].forEach((function(c){t.forEach((function(t){var i=t+c;i<=12&&i>=5&&8!==e&&i===e&&(r+=n[c])}))})),r},w=function(e,t,r){var n=C(e[t].figures),c=C(e["blue"===t?"green":"blue"].figures),i=[];return e[t].spare>0&&n.push(0),n.forEach((function(e){var t=e+r;t<=15&&(n.includes(t)||(8!==t||8===t&&!c.includes(8))&&i.push({field:e,target:t,rollResult:r,probability:t>=5&&t<=12&&8!==t?Y(t,c):0}))})),i},C=function(e){return e.map((function(e){return K(e)}))},V=function(e,t,r,n){var c=w(r,n,t);0===c.length?(e(S(n,"No Moves Available")),e(R(n,L)),Z(e,n)):(e(R(n,T)),e({type:d,player:n,moves:c}))},k=function(){var e=Object(a.d)((function(e){return e.roll})),t=Object(a.d)((function(e){return e.current})),r=Object(a.d)((function(e){return e.players})),n=Object(a.c)();return Object(B.jsxs)("div",{children:[null===e?Object(B.jsx)("button",{onClick:function(){return D(n,r,t)},children:"ROLL"}):"",Object(B.jsx)("h1",{className:"roll",children:e})]})},H=function(e){return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("div",{className:e.player+" figure",children:"\xa0"})})},W=function(e,t,r,n,c){if(e(R(r,L)),15===c)e(M(r,n)),e(function(e){return{type:u,player:e}}(r)),7===t[r].saved?window.confirm(r.toUpperCase()+" WINS!\nWould you like to start another game?")&&$(e,r):(e(S(r,"Figure Saved")),Z(e,r));else{var i="blue"===r?"green":"blue";t[i].figures.includes(Q(c,r))&&(e(M(i,Q(c,r))),e(S(r,"Figure Beaten"))),e(function(e,t,r){return{type:f,player:e,from:t,to:r}}(r,n,Q(c,r))),[4,8,14].includes(c)?(e(S(r,"Special Field|Extra Turn")),e(E())):Z(e,r)}},J=function(e,t,r){e(R(t,L)),e(x(t,Q(r,t))),4===r?(e(S(t,"Special Field|Extra Turn")),e(E())):Z(e,t)},q=function(e){var t=Object(a.c)(),r=Object(a.d)((function(e){return e.players})),n=Object(a.d)((function(e){return e.current})),c=Object(a.d)((function(e){return e.light})),i=r[n].state,s=r[n].moves,o=s.map((function(e){return e.field})),l="blue"===n?"startBlue":"startGreen",u=null;e.content||Object.keys(r).forEach((function(t){if(r[t].figures.find((function(t){return t===e.id})))return u=t,!1}));var b="",p=e.css,j=null,d=null,f=null;if(e.content)b=e.content,i===T&&o.includes(0)&&e.id===l&&(p+=" available",f=s.find((function(e){return 0===e.field})),j=function(){return J(t,n,f.target)},d=function(){return t(A(n,f.target,f.probability))});else if(u){b=Object(B.jsx)(H,{player:u});var y=K(e.id);i===T&&o.includes(y)&&e.id===Q(y,n)&&(p+=" available",f=s.find((function(t){return t.field===K(e.id)})),j=function(){return W(t,r,n,e.id,f.target)},d=function(){return t(A(n,f.target,f.probability))}),c&&Q(c.target,c.player)===e.id&&u!==n&&(p+=" conflict",b="".concat(c.probability))}else c&&Q(c.target,c.player)===e.id&&(p+=" target",b="".concat(c.probability));return Object(B.jsx)(B.Fragment,{children:Object(B.jsx)("td",{className:p,id:e.id,onClick:j,onMouseOver:d,onMouseOut:function(){return t({type:v})},children:b})})},z=r(8),K=function(e){return Math.abs(parseInt(e.substring(1)))},Q=function(e,t){return(e<5||e>12)&&(e="blue"===t?e:-e),"c"+e},X=function(e){return"blue"===e?"green":"blue"},Z=function(e,t){e({type:b}),e(S(X(t),"")),e(E())},$=function(e,t){e({type:h}),e(S(t,"")),e(S(X(t),"")),e(E())},ee=function(){var e=Object(a.d)((function(e){return e.current}),a.b),t=Object(a.d)((function(e){return e.players}),a.b),r=Object(a.c)(),c=function e(t,n){var c;c="RANDOM_ROBOT_PLAYER"===t[n].robot.type?I(t,n):"DEFENSIVE_ROBOT_PLAYER"===t[n].robot.type?function(e,t){var r=U(),n=w(e,t,r),c=n.sort((function(e,t){return e.probability-t.probability}));return{move:c.length>0?c[0]:void 0,roll:r,possibleMoves:n}}(t,n):"PACIFIST_ROBOT_PLAYER"===t[n].robot.type?function(e,t){var r=U(),n=w(e,t,r),c=e["blue"===t?"green":"blue"].figures.map((function(e){return K(e)})),i=n.filter((function(e){return!c.includes(e.target)}));if(i.length>0)return{move:i[Math.floor(Math.random()*i.length)],roll:r,possibleMoves:n};var s=Math.floor(Math.random()*n.length);return{move:n?n[s]:void 0,roll:r,possibleMoves:n}}(t,n):t[n].robot.type===G?function(e,t){var r=U(),n=w(e,t,r),c=n.sort((function(e,t){return t.probability-e.probability}));return{move:c.length>0?c[0]:void 0,roll:r,possibleMoves:n}}(t,n):I(t,n),D(r,z.cloneDeep(t),z.cloneDeep(n),c.roll),t[n].state===T&&c.move?(0===c.move.field?J(r,n,c.move.target):W(r,t,n,Q(c.move.field,n),c.move.target),[4,8,14].includes(c.move.target)&&e(t,n)):t[n].state===L&&c.move&&[4,8,14].includes(c.move.target)&&e(t,n)};return Object(n.useEffect)((function(){t[e].robot.isRobot&&setTimeout((function(){c(t,e)}),200)})),Object(B.jsx)("div",{children:Object(B.jsx)("table",{children:Object(B.jsxs)("tbody",{children:[Object(B.jsx)("tr",{children:Object(B.jsxs)("td",{className:"score"+("green"===e?" current":""),colSpan:"8",children:[Object(B.jsxs)("h1",{children:["Player 1 ",t.green.robot.type]}),Object(B.jsxs)("h2",{children:["FIGURES ON START: ",t.green.spare]}),Object(B.jsxs)("h2",{children:["IN GAME: ",t.green.inGame]}),Object(B.jsxs)("h2",{children:["FIGURES ON END: ",t.green.saved]}),"green"===e?Object(B.jsx)(k,{}):"",Object(B.jsx)("h3",{children:t.green.info.split("|").map((function(e,t){return Object(B.jsxs)(n.Fragment,{children:[e,Object(B.jsx)("br",{})]},t)}))})]})}),Object(B.jsxs)("tr",{children:[Object(B.jsx)(q,{css:"green extra",id:"c-4"}),Object(B.jsx)(q,{css:"green",id:"c-3"}),Object(B.jsx)(q,{css:"green",id:"c-2"}),Object(B.jsx)(q,{css:"green",id:"c-1"}),Object(B.jsx)(q,{css:"empty",content:"\u2190",id:"startGreen"}),Object(B.jsx)(q,{css:"empty",id:"c-15"}),Object(B.jsx)(q,{css:"green extra",id:"c-14"}),Object(B.jsx)(q,{css:"green",id:"c-13"})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)(q,{id:"c5"}),Object(B.jsx)(q,{id:"c6"}),Object(B.jsx)(q,{id:"c7"}),Object(B.jsx)(q,{css:"extra",id:"c8"}),Object(B.jsx)(q,{id:"c9"}),Object(B.jsx)(q,{id:"c10"}),Object(B.jsx)(q,{id:"c11"}),Object(B.jsx)(q,{id:"c12"})]}),Object(B.jsxs)("tr",{children:[Object(B.jsx)(q,{css:"blue extra",id:"c4"}),Object(B.jsx)(q,{css:"blue",id:"c3"}),Object(B.jsx)(q,{css:"blue",id:"c2"}),Object(B.jsx)(q,{css:"blue",id:"c1"}),Object(B.jsx)(q,{css:"empty",content:"\u2190",id:"startBlue"}),Object(B.jsx)(q,{css:"empty",id:"c15"}),Object(B.jsx)(q,{css:"blue extra",id:"c14"}),Object(B.jsx)(q,{css:"blue",id:"c13"})]}),Object(B.jsx)("tr",{children:Object(B.jsxs)("td",{className:"score"+("blue"===e?" current":""),colSpan:"8",children:[Object(B.jsxs)("h1",{children:["Player 2 ",t.blue.robot.type]}),Object(B.jsxs)("h2",{children:["FIGURES ON START: ",t.blue.spare]}),Object(B.jsxs)("h2",{children:["IN GAME: ",t.blue.inGame]}),Object(B.jsxs)("h2",{children:["FIGURES ON END: ",t.blue.saved]}),"blue"===e?Object(B.jsx)(k,{}):"",Object(B.jsx)("h3",{children:t.blue.info.split("|").map((function(e,t){return Object(B.jsxs)(n.Fragment,{children:[e,Object(B.jsx)("br",{})]},t)}))})]})})]})})})},te=r(4),re=Math.floor(2*Math.random())?"blue":"green",ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return"blue"===e?"green":"blue";default:return e}},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return t.value;case p:return null;default:return e}},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return null;case g:return{player:t.player,target:t.target,probability:t.probability};default:return e}},se=Object(te.a)({players:P,current:ne,roll:ce,light:ie}),ae=Object(te.b)(se);s.a.render(Object(B.jsx)(c.a.StrictMode,{children:Object(B.jsx)(a.a,{store:ae,children:Object(B.jsx)(ee,{})})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.bd05ea62.chunk.js.map